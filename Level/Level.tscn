[gd_scene load_steps=14 format=3 uid="uid://bb28plwvmfby2"]

[ext_resource type="Script" uid="uid://cn1dxroiw2037" path="res://Level/level.gd" id="1_5noo7"]
[ext_resource type="PackedScene" uid="uid://gpwfm6f76n8p" path="res://Meshes/level_base.blend" id="3_j3llj"]
[ext_resource type="Texture2D" uid="uid://ctkm7nmrthopo" path="res://Textures/pentagon.png" id="4_6fg3j"]
[ext_resource type="PackedScene" uid="uid://dv7isl1uvbrjv" path="res://Scenes/simon_says.tscn" id="4_6lumq"]
[ext_resource type="PackedScene" uid="uid://cjtk4yijo8t5r" path="res://Scenes/Portal.tscn" id="4_chl2c"]
[ext_resource type="PackedScene" uid="uid://dgsj7t1qj4utm" path="res://Scenes/button.tscn" id="4_i5eh5"]
[ext_resource type="PackedScene" uid="uid://dbc7h7oiowpka" path="res://Scenes/lift.tscn" id="5_5noo7"]
[ext_resource type="PackedScene" uid="uid://gewj4ymntyra" path="res://Scenes/sundial.tscn" id="8_chl2c"]
[ext_resource type="PackedScene" uid="uid://bh72vwki5ojnd" path="res://Scenes/reflector.tscn" id="9_wp1u0"]
[ext_resource type="PackedScene" uid="uid://ca4jbwb7djuc8" path="res://wall_segment.tscn" id="10_wp1u0"]

[sub_resource type="ParticleProcessMaterial" id="ParticleProcessMaterial_wp1u0"]
emission_shape_offset = Vector3(0, -6, 0)
emission_shape = 6
emission_ring_axis = Vector3(0, 90, 1)
emission_ring_height = 2.0
emission_ring_radius = 8.0
emission_ring_inner_radius = 7.63
emission_ring_cone_angle = 90.0
angle_min = 1.07288e-05
angle_max = 1.07288e-05
direction = Vector3(0, 1, 0)
spread = 0.0
initial_velocity_min = 1.0
initial_velocity_max = 10.0
gravity = Vector3(0, 0, 0)
scale_min = 0.02
scale_max = 0.12
turbulence_enabled = true

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_2ld0w"]
transparency = 1
albedo_texture = ExtResource("4_6fg3j")
emission_enabled = true
emission = Color(0.341176, 0, 1, 1)
emission_energy_multiplier = 2.0

[sub_resource type="QuadMesh" id="QuadMesh_6fg3j"]
material = SubResource("StandardMaterial3D_2ld0w")

[node name="Level" type="Node3D"]
script = ExtResource("1_5noo7")
selected_level = 1

[node name="Base" parent="." instance=ExtResource("3_j3llj")]

[node name="Portal" parent="." node_paths=PackedStringArray("dest") instance=ExtResource("4_chl2c")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 74.695, -13.8422, -47.7873)
dest = NodePath("Node3D")

[node name="Node3D" type="Node3D" parent="Portal"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 5.21808, 2.66521)

[node name="portal_particles" type="GPUParticles3D" parent="Portal"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -6.52251, 0)
amount = 32
preprocess = 1.0
speed_scale = 0.5
randomness = 0.13
fixed_fps = 20
transform_align = 3
process_material = SubResource("ParticleProcessMaterial_wp1u0")
draw_pass_1 = SubResource("QuadMesh_6fg3j")

[node name="GPUParticlesAttractorSphere3D" type="GPUParticlesAttractorSphere3D" parent="Portal"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.941698, 0)
strength = 128.0
radius = 40.0

[node name="SimonSays" parent="." instance=ExtResource("4_6lumq")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -3.26944, -12.9458, -16.1084)

[node name="FirstLift" type="Node3D" parent="." groups=["present"]]

[node name="LiftButton" parent="FirstLift" instance=ExtResource("4_i5eh5")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -18.4569, -12.9634, 15.0703)

[node name="LiftButton2" parent="FirstLift" instance=ExtResource("4_i5eh5")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -39.3498, -4.95289, 18.4587)

[node name="Lift" parent="FirstLift" node_paths=PackedStringArray("lower_button", "upper_button") instance=ExtResource("5_5noo7")]
transform = Transform3D(0.995627, 0, 0.0934132, 0, 1, 0, -0.0934132, 0, 0.995627, -34.8921, -5.43995, 21.0903)
collision_layer = 1
collision_mask = 1
lower_button = NodePath("../LiftButton")
upper_button = NodePath("../LiftButton2")

[node name="SundialPuzzle" type="Node3D" parent="." groups=["present"]]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 87.512, -25.1253, 27.4014)

[node name="Sundial" parent="SundialPuzzle" node_paths=PackedStringArray("button", "reflectors") instance=ExtResource("8_chl2c")]
transform = Transform3D(0.082843, 0, -0.996562, 0, 1, 0, 0.996563, 0, 0.0828429, 0.0121002, -2.29754, 0.0447464)
button = NodePath("../SundialButton")
reflectors = [NodePath("../Reflector"), NodePath("../Reflector2")]

[node name="Reflector" parent="SundialPuzzle" node_paths=PackedStringArray("sundial", "button") instance=ExtResource("9_wp1u0")]
transform = Transform3D(0.498609, 0, 0.866827, 0, 1, 0, -0.866827, 0, 0.498609, -2.74638, 17.6905, -69.71)
sundial = NodePath("../Sundial")
button = NodePath("../ReflectorButton")

[node name="ReflectorButton" parent="SundialPuzzle" instance=ExtResource("4_i5eh5")]
transform = Transform3D(0.529609, 0, -0.848243, 0, 1, 0, 0.848243, 0, 0.529609, -9.00732, 16.3194, -68.1811)
color = Color(0, 0.600216, 0.692913, 1)

[node name="Reflector2" parent="SundialPuzzle" node_paths=PackedStringArray("sundial", "button") instance=ExtResource("9_wp1u0")]
transform = Transform3D(0.552054, 0, 0.833809, 0, 1, 0, -0.833809, 0, 0.552054, -34.2249, -0.919416, -1.25554)
sundial = NodePath("../Sundial")
button = NodePath("../ReflectorButton2")

[node name="ReflectorButton2" parent="SundialPuzzle" instance=ExtResource("4_i5eh5")]
transform = Transform3D(0.082843, 0, -0.996563, 0, 1, 0, 0.996563, 0, 0.082843, -35.358, -2.33411, -4.17871)
color = Color(0, 0.600216, 0.692913, 1)

[node name="SundialButton" parent="SundialPuzzle" instance=ExtResource("4_i5eh5")]
transform = Transform3D(0.082843, 0, -0.996563, 0, 1, 0, 0.996562, 0, 0.082843, -3.40466, -2.32235, 4.7885)
color = Color(0, 0.600216, 0.692913, 1)

[node name="Lift" parent="." node_paths=PackedStringArray("lower_button", "upper_button") groups=["past", "present"] instance=ExtResource("5_5noo7")]
transform = Transform3D(0.687924, 0, 0.725782, 0, 1, 0, -0.725782, 0, 0.687924, 74.7518, -20.7674, 34.3069)
collision_layer = 1
collision_mask = 1
lower_position = Vector3(74.7518, -26.8195, 34.3069)
lower_rotation = Vector3(0, 0.812172, 0)
upper_position = Vector3(74.7518, -20.7674, 34.3069)
upper_rotation = Vector3(0, 0.812172, 0)
lower_button = NodePath("../lift_lower_button")
upper_button = NodePath("../lift_raise_button")

[node name="lift_lower_button" parent="." groups=["past", "present"] instance=ExtResource("4_i5eh5")]
transform = Transform3D(0.26, 0, 0, 0, 0.26, 0, 0, 0, 0.26, 91.5117, -27.4352, 36.3924)

[node name="lift_raise_button" parent="." groups=["past", "present"] instance=ExtResource("4_i5eh5")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 70.6355, -20.2977, 37.418)

[node name="Wall" type="Node3D" parent="."]
transform = Transform3D(0.958322, 0, -0.0567334, 0, 0.96, 0, 0.0567334, 0, 0.958322, 1.11006, -0.985922, -1.4902)

[node name="WallSegment" parent="Wall" instance=ExtResource("10_wp1u0")]
transform = Transform3D(0.995619, 0, 0.0935001, 0, 1, 0, -0.0935001, 0, 0.995619, 32.7009, -27.385, 17.3003)

[node name="WallSegment4" parent="Wall" instance=ExtResource("10_wp1u0")]
transform = Transform3D(0.999669, 0, -0.0257408, 0, 1, 0, 0.0257408, 0, 0.999669, 32.2143, -27.385, -1.01867)

[node name="WallSegment5" parent="Wall" instance=ExtResource("10_wp1u0")]
transform = Transform3D(0.999669, 0, -0.0257408, 0, 1, 0, 0.0257408, 0, 0.999669, 32.6008, -27.385, -19.3677)

[node name="WallSegment6" parent="Wall" instance=ExtResource("10_wp1u0")]
transform = Transform3D(0.999589, 0, 0.0286718, 0, 1, 0, -0.0286718, 0, 0.999589, 32.6008, -27.385, -37.865)

[node name="WallSegment7" parent="Wall" instance=ExtResource("10_wp1u0")]
transform = Transform3D(0.999589, 0, 0.0286718, 0, 1, 0, -0.0286718, 0, 0.999589, 32.1346, -27.385, -56.1256)

[node name="WallSegment2" parent="Wall" instance=ExtResource("10_wp1u0")]
transform = Transform3D(0.997659, 0, -0.068381, 0, 1, 0, 0.068381, 0, 0.997659, 32.8788, -27.3242, 35.5828)

[node name="WallSegment3" parent="Wall" instance=ExtResource("10_wp1u0")]
transform = Transform3D(0.985357, 0, 0.170502, 0, 1, 0, -0.170502, 0, 0.985357, 34.2419, -27.3304, 53.7647)
