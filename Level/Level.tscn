[gd_scene load_steps=18 format=4 uid="uid://bb28plwvmfby2"]

[ext_resource type="Script" uid="uid://cn1dxroiw2037" path="res://Level/level.gd" id="1_5noo7"]
[ext_resource type="PackedScene" uid="uid://gpwfm6f76n8p" path="res://Meshes/level_base.blend" id="3_j3llj"]
[ext_resource type="PackedScene" uid="uid://dv7isl1uvbrjv" path="res://Scenes/simon_says.tscn" id="4_6lumq"]
[ext_resource type="PackedScene" uid="uid://cjtk4yijo8t5r" path="res://Scenes/Portal.tscn" id="4_chl2c"]
[ext_resource type="PackedScene" uid="uid://dgsj7t1qj4utm" path="res://Scenes/button.tscn" id="4_i5eh5"]
[ext_resource type="PackedScene" uid="uid://dbc7h7oiowpka" path="res://Scenes/lift.tscn" id="5_5noo7"]
[ext_resource type="PackedScene" uid="uid://gewj4ymntyra" path="res://Scenes/sundial.tscn" id="8_chl2c"]
[ext_resource type="Shader" uid="uid://crn8m5dbsdkdg" path="res://Meshes/shaft_shader.gdshader" id="9_6fg3j"]
[ext_resource type="PackedScene" uid="uid://bh72vwki5ojnd" path="res://Scenes/reflector.tscn" id="9_wp1u0"]
[ext_resource type="PackedScene" uid="uid://ca4jbwb7djuc8" path="res://wall_segment.tscn" id="10_wp1u0"]
[ext_resource type="PackedScene" uid="uid://0p11ariwu823" path="res://Cannon.tscn" id="12_2ld0w"]
[ext_resource type="PackedScene" uid="uid://c8ajs5k432v2j" path="res://Scenes/hollow_planet.tscn" id="13_32x38"]
[ext_resource type="PackedScene" uid="uid://birwo03dt36aq" path="res://Scenes/mini_maze.tscn" id="13_66v8m"]
[ext_resource type="PackedScene" uid="uid://c4emg8m1hqsra" path="res://cage.tscn" id="13_ul75j"]

[sub_resource type="ShaderMaterial" id="ShaderMaterial_6fg3j"]
render_priority = 0
shader = ExtResource("9_6fg3j")
shader_parameter/base_color = Color(1, 1, 1, 0.5)
shader_parameter/falloff_power = 0.1
shader_parameter/facing_boost = 10.0
shader_parameter/facing_power = 0.1
shader_parameter/boost_along_y = 0.0
shader_parameter/feather_sharpness = 2.361
shader_parameter/feather_intensity = 0.761
shader_parameter/near_fade_start = 0.0
shader_parameter/near_fade_end = 50.0
shader_parameter/far_fade_start = 0.1
shader_parameter/far_fade_end = 0.1
shader_parameter/max_brightness = 10.0
shader_parameter/depth_feather_enabled = false
shader_parameter/depth_fade_distance = 0.5

[sub_resource type="ArrayMesh" id="ArrayMesh_aftgl"]
_surfaces = [{
"aabb": AABB(-0.1, -10, -0.1, 0.2, 20, 0.2),
"format": 34896613377,
"index_count": 18,
"index_data": PackedByteArray("AAABAAIAAQADAAIAAAADAAEAAwAEAAIABAAAAAIAAAAEAAMA"),
"primitive": 3,
"uv_scale": Vector4(0, 0, 0, 0),
"vertex_count": 5,
"vertex_data": PackedByteArray("/38AAAAAAAD//wAA/38AAP9/////fwAA/38AAP//AAAAAAAA/38AAA==")
}]
blend_shape_mode = 0

[sub_resource type="ArrayMesh" id="ArrayMesh_6fg3j"]
resource_name = "reflector_light_shaft_Cone"
_surfaces = [{
"aabb": AABB(-0.1, -10, -0.1, 0.2, 20, 0.2),
"attribute_data": PackedByteArray("/z+OgnB9/7//P/+/cH3/v/8/b/3/P/+//7+Ogv+/b/1v/f+/joL/v/8/b/2PAv+//z//v48C/7//P46C/z//vw=="),
"format": 34896613399,
"index_count": 18,
"index_data": PackedByteArray("AAABAAIAAwAEAAUABgAHAAgABgAJAAcACgALAAwADQAOAA8A"),
"material": SubResource("ShaderMaterial_6fg3j"),
"primitive": 3,
"uv_scale": Vector4(0, 0, 0, 0),
"vertex_count": 16,
"vertex_data": PackedByteArray("/38AAAAAnOn//wAA/3+c6f9/////f5zp//8AAP9/z8X/fwAA///Pxf9/////f8/F/38AAAAA/z//fwAA////P///AAD/f/8/AAAAAP9//z//fwAA///PxQAAAAD/f8/F/3////9/z8UAAAAA/3+c6f9/AAAAAJzp/3////9/nOkrtRZLK7UWSyu1FksbnQhjG50IYxudCGMAAP9/AAD/fwAA/38AAP9/COPj4gjj4+II4+PiFsvSyhbL0soWy9LK")
}]
blend_shape_mode = 0
shadow_mesh = SubResource("ArrayMesh_aftgl")

[node name="Level" type="Node3D"]
script = ExtResource("1_5noo7")
selected_level = 1

[node name="Base" parent="." instance=ExtResource("3_j3llj")]

[node name="Portal" parent="." node_paths=PackedStringArray("dest") groups=["present"] instance=ExtResource("4_chl2c")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 74.695, -15.2547, -47.7873)
dest = NodePath("../portal_1_dest")

[node name="portal_1_dest" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 74.695, -10.0796, -44.1715)

[node name="Portal2" parent="." node_paths=PackedStringArray("dest") groups=["present"] instance=ExtResource("4_chl2c")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 91.7237, -24.7129, -71.3615)
dest = NodePath("../portal_2_dest")

[node name="portal_2_dest" type="Node3D" parent="." groups=["future", "past", "present"]]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 79.695, -24.6241, -47.8068)

[node name="PastSundial" type="Node3D" parent="." groups=["present"]]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 87.512, -25.1253, 27.4014)

[node name="Sundial" parent="PastSundial" node_paths=PackedStringArray("button", "reflectors") instance=ExtResource("8_chl2c")]
transform = Transform3D(0.082843, 0, -0.996562, 0, 1, 0, 0.996563, 0, 0.0828429, 0.0121002, -2.29754, 0.0447464)
button = NodePath("../SundialButton")
reflectors = [NodePath("../Reflector"), NodePath("../Reflector2"), NodePath("../Reflector3"), NodePath("../Reflector4")]

[node name="Reflector" parent="PastSundial" node_paths=PackedStringArray("sundial", "button", "light_shaft") instance=ExtResource("9_wp1u0")]
transform = Transform3D(0.498609, 0, 0.866827, 0, 1, 0, -0.866827, 0, 0.498609, -2.74638, 17.6905, -69.71)
sundial = NodePath("../Sundial")
button = NodePath("../ReflectorButton")
light_shaft = NodePath("../LightShaft")

[node name="ReflectorButton" parent="PastSundial" instance=ExtResource("4_i5eh5")]
transform = Transform3D(0.529609, 0, -0.848243, 0, 1, 0, 0.848243, 0, 0.529609, -9.00732, 16.3194, -68.1811)
color = Color(0, 0.600216, 0.692913, 1)

[node name="LightShaft" type="MeshInstance3D" parent="PastSundial"]
transform = Transform3D(-0.249354, -0.159011, -3.50755, 3.48193, 0.441579, -0.267551, 0.452104, -3.48857, 0.12601, -1.39748, 13.3124, -34.8424)
mesh = SubResource("ArrayMesh_6fg3j")
skeleton = NodePath("")

[node name="Reflector2" parent="PastSundial" node_paths=PackedStringArray("sundial", "button", "light_shaft") instance=ExtResource("9_wp1u0")]
transform = Transform3D(-0.808299, 0, -0.588773, 0, 1, 0, 0.588773, 0, -0.808299, -38.7015, -0.919416, -4.28496)
sundial = NodePath("../Sundial")
button = NodePath("../ReflectorButton2")
light_shaft = NodePath("../LightShaft2")

[node name="ReflectorButton2" parent="PastSundial" instance=ExtResource("4_i5eh5")]
transform = Transform3D(0.082843, 0, -0.996563, 0, 1, 0, 0.996563, 0, 0.082843, -35.358, -2.33411, -4.17871)
color = Color(0, 0.600216, 0.692913, 1)

[node name="LightShaft2" type="MeshInstance3D" parent="PastSundial"]
transform = Transform3D(-0.496174, -1.90098, -0.201778, 1.91149, -0.496118, -0.0263783, -0.0252968, -0.201917, 1.96449, -19.088, 3.98455, -2.03868)
mesh = SubResource("ArrayMesh_6fg3j")
skeleton = NodePath("")

[node name="Reflector3" parent="PastSundial" node_paths=PackedStringArray("sundial", "button", "light_shaft") instance=ExtResource("9_wp1u0")]
transform = Transform3D(0.85794, 0, 0.513751, 0, 1, 0, -0.513751, 0, 0.85794, 12.9331, -0.919416, 57.8528)
sundial = NodePath("../Sundial")
button = NodePath("../ReflectorButton3")
light_shaft = NodePath("../LightShaft3")

[node name="ReflectorButton3" parent="PastSundial" instance=ExtResource("4_i5eh5")]
transform = Transform3D(0.082843, 0, -0.996563, 0, 1, 0, 0.996563, 0, 0.082843, 13.9091, -2.33411, 55.3594)
color = Color(0, 0.600216, 0.692913, 1)

[node name="LightShaft3" type="MeshInstance3D" parent="PastSundial"]
transform = Transform3D(1.20116, 0.635719, 2.64645, 2.71473, -0.487193, -1.11512, 0.195102, 2.86516, -0.776808, 6.37586, 3.94311, 28.8925)
mesh = SubResource("ArrayMesh_6fg3j")
skeleton = NodePath("")

[node name="Reflector4" parent="PastSundial" node_paths=PackedStringArray("sundial", "button", "light_shaft") instance=ExtResource("9_wp1u0")]
transform = Transform3D(-0.808299, 0, -0.588773, 0, 1, 0, 0.588773, 0, -0.808299, -42.184, -0.919416, -53.4961)
sundial = NodePath("../Sundial")
button = NodePath("../ReflectorButton4")
light_shaft = NodePath("../LightShaft4")

[node name="ReflectorButton4" parent="PastSundial" instance=ExtResource("4_i5eh5")]
transform = Transform3D(0.082843, 0, -0.996563, 0, 1, 0, 0.996563, 0, 0.082843, -40.9784, -2.33411, -50.3247)
color = Color(0, 0.600216, 0.692913, 1)

[node name="LightShaft4" type="MeshInstance3D" parent="PastSundial"]
transform = Transform3D(-1.31509, -2.09311, -2.37067, 3.12926, -0.490229, -1.30308, 0.457025, -2.66631, 2.10061, -21.0681, 4.02782, -26.6363)
mesh = SubResource("ArrayMesh_6fg3j")
skeleton = NodePath("")

[node name="SundialButton" parent="PastSundial" instance=ExtResource("4_i5eh5")]
transform = Transform3D(0.082843, 0, -0.996563, 0, 1, 0, 0.996562, 0, 0.082843, -3.40466, -2.32235, 4.7885)
color = Color(0, 0.600216, 0.692913, 1)

[node name="Wall" type="Node3D" parent="."]
transform = Transform3D(0.958322, 0, -0.0567334, 0, 0.96, 0, 0.0567334, 0, 0.958322, 1.11006, -0.985922, -1.4902)

[node name="WallSegment" parent="Wall" instance=ExtResource("10_wp1u0")]
transform = Transform3D(0.995619, 0, 0.0935001, 0, 1, 0, -0.0935001, 0, 0.995619, 32.7009, -27.385, 17.3003)

[node name="WallSegment4" parent="Wall" instance=ExtResource("10_wp1u0")]
transform = Transform3D(0.999669, 0, -0.0257408, 0, 1, 0, 0.0257408, 0, 0.999669, 32.2143, -27.385, -1.01867)

[node name="WallSegment5" parent="Wall" instance=ExtResource("10_wp1u0")]
transform = Transform3D(0.999669, 0, -0.0257408, 0, 1, 0, 0.0257408, 0, 0.999669, 32.6008, -27.385, -19.3677)

[node name="WallSegment6" parent="Wall" instance=ExtResource("10_wp1u0")]
transform = Transform3D(0.999589, 0, 0.0286718, 0, 1, 0, -0.0286718, 0, 0.999589, 32.6008, -27.385, -37.865)

[node name="WallSegment7" parent="Wall" instance=ExtResource("10_wp1u0")]
transform = Transform3D(0.999589, 0, 0.0286718, 0, 1, 0, -0.0286718, 0, 0.999589, 32.1346, -27.385, -56.1256)

[node name="WallSegment2" parent="Wall" instance=ExtResource("10_wp1u0")]
transform = Transform3D(0.997659, 0, -0.068381, 0, 1, 0, 0.068381, 0, 0.997659, 32.8788, -27.3242, 35.5828)

[node name="WallSegment3" parent="Wall" instance=ExtResource("10_wp1u0")]
transform = Transform3D(0.985357, 0, 0.170502, 0, 1, 0, -0.170502, 0, 0.985357, 34.2419, -27.3304, 53.7647)

[node name="FirstLift" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 77.5556, -19.9691, 32.4282)

[node name="Lift" parent="FirstLift" node_paths=PackedStringArray("lower_button", "upper_button") groups=["past", "present"] instance=ExtResource("5_5noo7")]
transform = Transform3D(0.687924, 0, 0.725782, 0, 1, 0, -0.725782, 0, 0.687924, -2.80377, -0.798298, 1.87872)
collision_layer = 1
collision_mask = 1
lower_position = Vector3(-2.804, -6.798, 1.879)
lower_rotation = Vector3(0, 0.812172, 0)
upper_position = Vector3(-2.80377, -0.798298, 1.87872)
upper_rotation = Vector3(0, 0.812172, 0)
lower_button = NodePath("../lift_lower_button")
upper_button = NodePath("../lift_raise_button")

[node name="lift_lower_button" parent="FirstLift" groups=["past", "present"] instance=ExtResource("4_i5eh5")]
transform = Transform3D(0.26, 0, 0, 0, 0.26, 0, 0, 0, 0.26, 13.8984, -7.48629, 3.8876)

[node name="lift_raise_button" parent="FirstLift" groups=["past", "present"] instance=ExtResource("4_i5eh5")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -6.92007, -0.328598, 4.98981)

[node name="Cannon" parent="." groups=["present"] instance=ExtResource("12_2ld0w")]
transform = Transform3D(-0.0784591, 0, -0.996917, 0, 1, 0, 0.996917, 0, -0.0784591, 61.4207, -15.2016, 56.6796)
dir_y_degrees = 175.0
dir_x_degrees = 50.0
force = 25.0

[node name="Cannon2" parent="." groups=["present"] instance=ExtResource("12_2ld0w")]
transform = Transform3D(0.995263, 0, -0.0972182, 0, 1, 0, 0.0972182, 0, 0.995263, 65.4207, -5.4234, 13.6122)
dir_y_degrees = -95.0
force = 24.0

[node name="Cannon3" parent="." groups=["present"] instance=ExtResource("12_2ld0w")]
transform = Transform3D(-0.998597, 0, -0.0529633, 0, 1, 0, 0.0529633, 0, -0.998597, -2.05968, -27.4293, -33.3541)
dir_y_degrees = 15.0
dir_x_degrees = 80.0
force = 42.0

[node name="HollowPlanet_Medium_Ball" parent="." groups=["present"] instance=ExtResource("13_32x38")]
transform = Transform3D(0.991669, 0, -0.128813, 0, 1, 0, 0.128813, 0, 0.991669, 1.39115, 32.1701, -26.0288)

[node name="HollowPlanet_Big_Ball" parent="." groups=["future"] instance=ExtResource("13_32x38")]
transform = Transform3D(-0.264478, 0, 1.98244, 0, 2, 0, -1.98244, 0, -0.264478, 4.19885, 62.3718, 16.3152)
visible = false

[node name="Portal3" parent="." node_paths=PackedStringArray("dest") groups=["past"] instance=ExtResource("4_chl2c")]
transform = Transform3D(0.4, 0, 0, 0, 0.4, 0, 0, 0, 0.4, 69.6981, -24.0411, 1.5068)
visible = false
dest = NodePath("../mini_pyramid_entry")

[node name="mini_pyramid_entry" type="Node3D" parent="."]
transform = Transform3D(0.4, 0, 0, 0, 0.4, 0, 0, 0, 0.4, 72.3206, -26.5712, 1.5068)

[node name="Portal4" parent="." node_paths=PackedStringArray("dest") groups=["past"] instance=ExtResource("4_chl2c")]
transform = Transform3D(0.4, 0, 0, 0, 0.4, 0, 0, 0, 0.4, 74.0729, -26.4454, 7.5068)
visible = false
dest = NodePath("../mini_pyramid_exit")

[node name="mini_pyramid_exit" type="Node3D" parent="."]
transform = Transform3D(0.4, 0, 0, 0, 0.4, 0, 0, 0, 0.4, 68.279, -24.7121, 1.5068)

[node name="FutureSundial" type="Node3D" parent="." groups=["present"]]

[node name="Sundial" parent="FutureSundial" node_paths=PackedStringArray("button", "reflectors") instance=ExtResource("8_chl2c")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -23.9011, -27.4265, -3.96613)
button = NodePath("../SundialButton")
reflectors = [NodePath("../Reflector"), NodePath("../Reflector2"), NodePath("../Reflector3"), NodePath("../Reflector4")]

[node name="SundialButton" parent="FutureSundial" instance=ExtResource("4_i5eh5")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -19.5235, -27.4745, -7.98668)

[node name="Reflector" parent="FutureSundial" node_paths=PackedStringArray("sundial", "button", "light_shaft") instance=ExtResource("9_wp1u0")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -23.9375, -25.42, -22.7825)
sundial = NodePath("../Sundial")
button = NodePath("../Button")
light_shaft = NodePath("../LightShaft")

[node name="Button" parent="FutureSundial" instance=ExtResource("4_i5eh5")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -26.3526, -27.4688, -22.6016)

[node name="LightShaft" type="MeshInstance3D" parent="FutureSundial"]
transform = Transform3D(-1.35617, -0.348361, -3.12571, 3.12926, -0.490229, -1.30308, -0.314854, -3.37179, 0.512393, -54.8004, -21.0975, 0.7651)
mesh = SubResource("ArrayMesh_6fg3j")
skeleton = NodePath("")

[node name="Reflector2" parent="FutureSundial" node_paths=PackedStringArray("sundial", "button", "light_shaft") instance=ExtResource("9_wp1u0")]
transform = Transform3D(-0.993957, 0, 0.109769, 0, 1, 0, -0.109769, 0, -0.993957, -3.11654, -25.42, -33.8185)
sundial = NodePath("../Sundial")
button = NodePath("../Button2")
light_shaft = NodePath("../LightShaft2")

[node name="Button2" parent="FutureSundial" instance=ExtResource("4_i5eh5")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -3.61653, -27.4688, -28.9452)

[node name="LightShaft2" type="MeshInstance3D" parent="FutureSundial"]
transform = Transform3D(-1.35617, -0.348361, -3.12571, 3.12926, -0.490229, -1.30308, -0.314854, -3.37179, 0.512393, -61.667, -21.0975, 0.7651)
mesh = SubResource("ArrayMesh_6fg3j")
skeleton = NodePath("")

[node name="Reflector3" parent="FutureSundial" node_paths=PackedStringArray("sundial", "button", "light_shaft") instance=ExtResource("9_wp1u0")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -17.5536, -25.42, -26.7458)
sundial = NodePath("../Sundial")
button = NodePath("../Button3")
light_shaft = NodePath("../LightShaft3")

[node name="Button3" parent="FutureSundial" instance=ExtResource("4_i5eh5")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -19.9688, -27.4688, -26.565)

[node name="LightShaft3" type="MeshInstance3D" parent="FutureSundial"]
transform = Transform3D(-1.35617, -0.348361, -3.12571, 3.12926, -0.490229, -1.30308, -0.314854, -3.37179, 0.512393, -66.8611, -21.0975, 0.7651)
mesh = SubResource("ArrayMesh_6fg3j")
skeleton = NodePath("")

[node name="Reflector4" parent="FutureSundial" node_paths=PackedStringArray("sundial", "button", "light_shaft") instance=ExtResource("9_wp1u0")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -33.037, -25.42, -23.8192)
sundial = NodePath("../Sundial")
button = NodePath("../Button4")
light_shaft = NodePath("../LightShaft4")

[node name="Button4" parent="FutureSundial" instance=ExtResource("4_i5eh5")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -35.4521, -27.4688, -23.6383)

[node name="LightShaft4" type="MeshInstance3D" parent="FutureSundial"]
transform = Transform3D(-1.35617, -0.348361, -3.12571, 3.12926, -0.490229, -1.30308, -0.314854, -3.37179, 0.512393, -72.1406, -21.0975, 0.7651)
mesh = SubResource("ArrayMesh_6fg3j")
skeleton = NodePath("")

[node name="SimonSaysPuzzle" type="Node3D" parent="." groups=["present"]]

[node name="SimonSays" parent="SimonSaysPuzzle" node_paths=PackedStringArray("cage") instance=ExtResource("4_6lumq")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -9.7332, -27.481, -28.9548)
cage = NodePath("../Cage")

[node name="Cage" parent="SimonSaysPuzzle" instance=ExtResource("13_ul75j")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -3.70135, -23.9149, -29.0007)

[node name="MiniMaze" parent="." groups=["past"] instance=ExtResource("13_66v8m")]
transform = Transform3D(1.86, 0, 0, 0, 1.86, 0, 0, 0, 1.86, -52.606, -26.6088, -19.2759)
visible = false
